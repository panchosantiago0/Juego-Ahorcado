<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego Ahorcado</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="color">
    
    <div class="contenedor">
        <div class="adivinar">
            <h1 class="h1">Juego del Ahorcado</h1>
            <h4 class="titilos">Adivina la palabra!</h4>
            <div id="tablero"></div>
            <h4 class="titilos">Ingresa una letra...</h4>
         
            <div class="casillaIngreso">
                <input class="input" type="text" name="nombre" maxlength="1" />
            </div>

            <div id="status"></div>
            <p id="intentos"></p>
            <p id="resultado"></p>
        </div>
        <div class="dibujo">
            <img class="img" id="imagen" width="250" src="img/G.png">
        </div>
    </div>
    <script src="ahorcadojava.js"></script>
</body>
</html>

<script>
    /*
    var intentos = 6;
    var arrCoincidencias = []; // esto es para corregir!
    const palabrAdivinar = ingresarPalabra();

    creaTablero(palabrAdivinar);
    
    const letra = document.querySelector('input');
    letra.oninput = function(){
        if(soloLetras(letra.value)){
            mostrarTablero(letra.value);
            buscarCoincidencia(letra.value);  
        }
    };

    function ingresarPalabra(){
        const palabra = prompt("Ingresa una palabra para adivinar!");
        const arrPalabra = palabra.split("");
        console.log(arrPalabra);
        
        return arrPalabra;
    };

    function creaTablero(arrPalabra){
        let tablero = document.getElementById("tablero");
        let tablaHTML = "<table><tr>";

        arrPalabra.forEach(letra => {
            arrCoincidencias.push("?");
        });
        console.log(arrCoincidencias);


        for (let i = 0; i < arrCoincidencias.length; i++) {
        tablaHTML += "<td>" + arrCoincidencias[i] + "</td>";
        }

        tablaHTML += "</tr></table>";
        tablero.innerHTML = tablaHTML;

        document.getElementById("intentos").innerHTML = "Intentos restantes: " + intentos;
    }

    function soloLetras(cadena){
        const pattern = new RegExp('[a-zA-Z]');//patrón que solo permite letras
        console.log(pattern.test(cadena));

        if(!pattern.test(cadena)){
            document.querySelector('input').value = "";
            document.getElementById("status").innerHTML = "Solo puedes ingresar letras!!!..";
            return false;
        }else{
            return true;
        }
    }

    function buscarCoincidencia(letra){
        let tablero = "";
        let coincidencias = 0;

        palabrAdivinar.forEach(caracter => {
            if(caracter == letra){
                console.log(caracter);
                coincidencias += 1;
            }
        });

        if(coincidencias > 0){
            document.getElementById("status").innerHTML = `Hubo ${coincidencias} coincidencias!!!`;

            if (arrCoincidencias.indexOf("?") == -1) {
                document.getElementById("resultado").innerHTML = "¡Ganaste!";
            }
            
        }else{
            intentos--;
            document.getElementById("status").innerHTML = `No hubo coinciencias :(`;
            document.getElementById("intentos").innerHTML = "Intentos restantes: " + intentos;

            if(intentos==0){
                document.getElementById("resultado").innerHTML = `Perdiste`;
                //como hago para que no siga jugando?
            }
        }


        let imagen = document.getElementById("imagen");
        
        switch (intentos) {
            case 1:
                imagen.src = "img/1.png";
                break;

            case 2:
                imagen.src = "img/2.png";
                break;
            
            case 3:
                imagen.src = "img/3.png";
                break;
            
            case 4:
                imagen.src = "img/4.png";
                break;
            
            case 5:
                imagen.src = "img/5.png";
                break;
            
            case 6:
                imagen.src = "img/6.png";
                break;
        }
    }

    function mostrarTablero(letra){
        let tablero = document.getElementById("tablero");
        let tablaHTML = "<table><tr>";
        
        for (let i = 0; i < palabrAdivinar.length; i++) {
            if(palabrAdivinar[i]==letra){
                arrCoincidencias[i]=letra;
            }
        }

        for (i = 0; i < arrCoincidencias.length; i++) {
        tablaHTML += "<td>" + arrCoincidencias[i] + "</td>";
        }

        tablaHTML += "</tr></table>";
        tablero.innerHTML = tablaHTML;
    }
    */
</script>